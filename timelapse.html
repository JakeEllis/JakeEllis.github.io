<!DOCTYPE html>
<html>



<body>

      <p>
            <h3>Testing Timelapse Videos from GCP - test</h3>

            <h2 id="year"></h2>
            <h2 id="month"></h2>
            <h2 id="day"></h2>
      
            <h2 id="videoName1">Video Name1</h2>
      <h2 id="videoName2">Video Name2</h2>


            <!-- follow this link to change the permissions of the videos folder -->
            <!-- https://cloud.google.com/storage/docs/access-control/making-data-public -->
            <!-- https://www.aloudinthecloud.com/how-to-serve-website-images-from-google-cloud.html -->

            <object id="videoUrl" data="https://storage.googleapis.com/date-night-qa.appspot.com/parking_lot_timelapse/videos/0305_121502_MP4_Test.mp4" width="600" height="600"> 
            <param id="videoUrl" name="src" value="https://storage.googleapis.com/date-night-qa.appspot.com/parking_lot_timelapse/videos/0305_121502_MP4_Test.mp4" /> 
            <embed id="videoUrl" type="video/mp4" src="https://storage.googleapis.com/date-night-qa.appspot.com/parking_lot_timelapse/videos/0305_121502_MP4_Test.mp4" width="600" height="600"></embed> 
            </object>


      </p>

</body>

<head>
      <script>
            const date = new Date();
            console.log(date); // Fri Jun 17 2022 11:27:28 GMT+0100 (British Summer Time)
            let day = date.getDate();
            let month = date.getMonth() + 1;
            let year = date.getFullYear();

            document.getElementById("day").innerHTML=day;
            document.getElementById("month").innerHTML=month;
            document.getElementById("year").innerHTML=year;
            
              // Imports the Google Cloud client library
            const {Storage} = require('@google-cloud/storage');

            // Creates a client
            const storage = new Storage();
            
            async function readFiles () {
              const [files] = await bucket.getFiles({ prefix: 'date-night-qa.appspot.com/parking_lot_timelapse/videos'});
              console.log('Files:');
              files.forEach(file => {
                document.getElementById("videoName1").innerHTML=videoSrcUrl;
              });
            };
            
          admin.storage().bucket()
          .getFiles({ prefix: 'date-night-qa.appspot.com/parking_lot_timelapse/videos/', autoPaginate: false })
          .then((files) => {
            document.getElementById("videoName2").innerHTML=videoSrcUrl;
          });

            let videoSrcUrl = "URL HERE"
            document.getElementById("videoUrl").src=videoSrcUrl;
      </script>
</head>
</html>
